(this["webpackJsonpreddit-client"]=this["webpackJsonpreddit-client"]||[]).push([[0],{17:function(t,e,n){},20:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(13),s=n.n(a),i=(n(27),n(11)),o=n(3),u=(n(28),n(4)),d=n(10),l=Object(d.b)({name:"posts",initialState:{posts:{},activePost:{},activePostComments:{}},reducers:{addPost:function(t,e){t.posts={},e.payload.forEach((function(e){t.posts[e.id]=e}))},setActivePost:function(t,e){t.activePost=e.payload},setActivePostComments:function(t,e){t.activePostComments={},e.payload.forEach((function(e){var n=e.poster,r=e.comment,c=e.id;t.activePostComments[c]={poster:n,comment:r,id:c}}))}}}),p=function(t){return t.posts.posts},j=function(t){return t.posts.activePost},m=function(t){return t.posts.activePostComments},b=l.actions,h=b.addPost,f=b.setActivePost,v=b.setActivePostComments,O=l.reducer,x=(n(20),n(1)),w=function(t){var e=Date.now()-new Date(1e3*t),n=e/262656e4,r=e/864e5,c=e/36e5,a=e/6e4;return n>12?"more than a year ago":n>=1?Math.round(n)+" months ago":r>=1?Math.round(r)+" days ago":c>=1?Math.round(c)+" hours ago":a>=1?Math.round(a)+" minutes ago":"less than a minute ago"};function y(){var t=Object(u.c)(p),e=Object(u.b)();return Object(x.jsx)("section",{id:"posts",children:Object.values(t).map((function(t){return Object(x.jsx)(i.b,{to:"/post",className:"postInPosts",onClick:function(){return e(f(t))},children:Object(x.jsxs)("div",{id:"post",children:[Object(x.jsx)("h2",{id:"title",children:t.title}),Object(x.jsx)("img",{src:t.url,alt:"",onError:function(t){return t.target.style.display="none"}}),Object(x.jsx)("p",{children:t.content}),Object(x.jsxs)("div",{className:"postData",children:[Object(x.jsxs)("p",{className:"data",children:[t.upVotes-t.downVotes," upvotes"]}),Object(x.jsx)("p",{className:"data",children:w(t.timePosted)}),Object(x.jsx)("p",{className:"data",children:t.poster}),Object(x.jsxs)("p",{className:"data",children:[t.numComments," comments"]})]})]})},t.id)}))})}var k=n(2),g=n.n(k),N=n(7),P=function(){var t=Object(N.a)(g.a.mark((function t(e){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://www.reddit.com/search.json?q=".concat(e,"&type=link"));case 3:if(!(n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r.data.children.map((function(t){var e=t.data;return{title:e.title,poster:e.author,timePosted:e.created,downVotes:e.downs,upVotes:e.ups,numComments:e.num_comments,permalink:e.permalink,url:e.url,content:e.selftext,id:e.id}})));case 9:throw new Error("Request Failed!");case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return","An error has occured. Please try again.");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=Object(N.a)(g.a.mark((function t(e){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://www.reddit.com".concat(e,".json"));case 3:if(!(n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r);case 9:throw new Error("Request Failed!");case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return","An Error has occured. Please try again.");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(N.a)(g.a.mark((function t(){var e,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://www.reddit.com/subreddits.json?limit=10");case 3:if(!(e=t.sent).ok){t.next=9;break}return t.next=7,e.json();case 7:return n=t.sent,t.abrupt("return",n.data.children.map((function(t){var e=t.data;return{name:e.display_name_prefixed,url:e.url,icon:e.community_icon.split("?")[0],banner:e.banner_img,id:e.id}})));case 9:throw new Error("Request Failed!");case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return","An error has occured. Please try again.");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();function S(){var t=Object(u.c)(j),e=Object(u.c)(m),n=Object(u.b)();return Object(r.useEffect)((function(){function e(){return(e=Object(N.a)(g.a.mark((function e(){var r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t.permalink);case 2:r=e.sent,c=r[1].data.children.map((function(t){var e=t.data;return{poster:e.author,comment:e.body,id:e.id}})),n(v(c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(x.jsx)("section",{className:"comments",children:Object.values(e).map((function(t){return Object(x.jsxs)("div",{className:"comment",children:[Object(x.jsx)("p",{className:"poster",children:t.poster}),Object(x.jsx)("p",{className:"content",children:t.comment})]},t.id)}))})}function E(){var t=Object(u.c)(j);return Object(x.jsxs)("div",{id:"postWithComments",children:[Object(x.jsxs)("div",{id:"post",children:[Object(x.jsx)("h2",{id:"title",children:t.title}),Object(x.jsx)("img",{src:t.url,alt:"",style:{width:"30%",height:"30%"},onError:function(t){return t.target.style.display="none"}}),Object(x.jsx)("p",{id:"content",children:t.content}),Object(x.jsxs)("div",{className:"postData",children:[Object(x.jsxs)("p",{className:"data",children:[t.upVotes-t.downVotes," upvotes"]}),Object(x.jsx)("p",{className:"data",children:w(t.timePosted)}),Object(x.jsx)("p",{className:"data",children:t.numComments})]})]}),Object(x.jsx)(S,{})]})}var V=n(14);n(17);function A(){var t=Object(r.useState)(""),e=Object(V.a)(t,2),n=e[0],c=e[1],a=Object(u.b)();Object(r.useEffect)((function(){function t(){return(t=Object(N.a)(g.a.mark((function t(){var e,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("/r/Home");case 2:e=t.sent,n=e.data.children.map((function(t){var e=t.data;return{title:e.title,poster:e.author,timePosted:e.created,downVotes:e.downs,upVotes:e.ups,numComments:e.num_comments,permalink:e.permalink,url:e.url,content:e.selftext,id:e.id}})),a(h(n));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var s=function(){var t=Object(N.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(n);case 2:e=t.sent,a(h(e));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"searchBar",children:[Object(x.jsx)("input",{placeholder:"Search",onChange:function(t){return c(t.target.value)},onKeyPress:function(t){return function(t){"Enter"===t.key&&s()}(t)}}),Object(x.jsx)("button",{className:"searchButton",onClick:function(){s()},children:"Search"})]})}var B=Object(d.b)({name:"subReddits",initialState:{subReddits:{},activeSubReddit:"/r/Home"},reducers:{addSubReddit:function(t,e){e.payload.forEach((function(e){e.name,e.url,e.icon;var n=e.id;t.subReddits[n]=e}))},setActiveSubReddit:function(t,e){t.activeSubReddit=e.payload}}}),_=function(t){return t.subReddits.subReddits},M=function(t){return t.subReddits.activeSubReddit},I=B.actions,q=I.addSubReddit,D=I.setActiveSubReddit,F=B.reducer,W=n.p+"static/media/reddit-logo.b31490f4.png";function H(){var t=Object(u.c)(_),e=Object(u.c)(M),n=Object(u.b)();function c(t){return a.apply(this,arguments)}function a(){return(a=Object(N.a)(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(e);case 2:return n=t.sent,t.abrupt("return",n.data.children.map((function(t){var e=t.data;return{title:e.title,poster:e.author,timePosted:e.created,downVotes:e.downs,upVotes:e.ups,numComments:e.num_comments,permalink:e.permalink,url:e.url,content:e.selftext,id:e.id}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function t(){return(t=Object(N.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:e=t.sent,n(q(e));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(x.jsx)("section",{id:"subreddits",children:Object(x.jsx)("ul",{children:Object.values(t).map((function(t){return Object(x.jsx)("li",{className:t.url===e.url?"activeSub":"undefined",children:Object(x.jsx)(i.b,{to:"/",className:"sub",onClick:function(){function e(){return(e=Object(N.a)(g.a.mark((function e(){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(D(t)),e.next=3,c(t.url);case 3:r=e.sent,n(h(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:t.icon,alt:"",onError:function(t){return t.target.src=W}}),Object(x.jsx)("p",{className:"subName",children:t.name})]})})},t.id)}))})})}var J=n.p+"static/media/defaultBanner.0985782f.jpg";function z(){var t=Object(u.c)(M),e=J,n=Object(r.useState)(!1),c=Object(V.a)(n,2),a=c[0],s=c[1];return Object(x.jsxs)("div",{id:"navBar",style:function(t){var n;return n=t.banner?t.banner:e,{backgroundImage:"url(".concat(n,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}(t),children:[Object(x.jsx)("h1",{className:"title",children:"Reddit Mini"}),Object(x.jsx)(A,{}),Object(x.jsxs)("div",{className:"mobileNavBar",children:[Object(x.jsx)("button",{className:"menuBtn",onClick:function(){s(!a)},children:"SubReddit's"}),Object(x.jsx)("div",{className:a?"navIsVisible":"navIsNotVisible",children:Object(x.jsx)(H,{})})]}),Object(x.jsx)("div",{className:"desktopNavBar",children:Object(x.jsx)(H,{})})]})}var K=function(){return Object(x.jsx)(i.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(z,{}),Object(x.jsx)("main",{children:Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{path:"/",exact:!0,component:y}),Object(x.jsx)(o.a,{path:"/post",component:E})]})})]})})},$=Object(d.a)({reducer:{posts:O,subReddits:F}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(u.a,{store:$,children:Object(x.jsx)(K,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.ed822fdc.chunk.js.map